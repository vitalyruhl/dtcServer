# Copilot Code Style Guide

## Project Vision & Scope

**PRIMARY FOCUS**: Coinbase integration only (for now)

**MAIN PURPOSE**: SierraChart ↔ Coinbase Advanced Trade API Bridge

**CORE FEATURES**:
- Historical chart data (all timeframes) with local caching
- Real-time DOM (Depth of Market) streaming  
- Live trading capabilities (paid version)
- Docker deployment with credential injection
- Modular architecture for future exchange integrations

## Communication Style
- **Always use informal tone**: "you" instead of "Sie" or formal language
- **Be direct and friendly**: "Let's fix this bug" instead of "We should consider addressing this issue"

## Language Requirements
- **All code comments**: English only
- **All variable names**: English only (e.g. `market_data`, not `markt_daten`)
- **All function names**: English only (e.g. `connect_to_server()`, not `verbinde_zum_server()`)
- **All error messages**: English only
- **All log messages**: English only

## Code Style Examples

### ✅ Good (English, informal)
```cpp
// Hey, let's connect to the Coinbase WebSocket
bool connect_to_websocket(const std::string& url) {
    auto connection = websocket_client.connect(url);
    if (!connection) {
        log_error("Failed to connect - check your network!");
        return false;
    }
    
    // You're now connected to the feed
    log_info("Successfully connected to Coinbase feed");
    return true;
}
```

### ❌ Bad (German, formal)
```cpp
// Verbindung zum Coinbase WebSocket herstellen
bool verbinde_zum_websocket(const std::string& url) {
    auto verbindung = websocket_client.connect(url);
    if (!verbindung) {
        log_fehler("Verbindung fehlgeschlagen - Netzwerk prüfen");
        return false;
    }
    return true;
}
```

## Naming Conventions
- **Classes**: PascalCase in English (`MarketDataHandler`, `CoinbaseFeed`)
- **Functions**: snake_case in English (`process_trade_data`, `handle_connection_error`)
- **Variables**: snake_case in English (`symbol_id`, `trade_volume`, `connection_status`)
- **Constants**: UPPER_SNAKE_CASE in English (`MAX_RETRY_ATTEMPTS`, `DEFAULT_TIMEOUT_MS`)

## Comment Style
- Use `//` for single-line comments
- Be casual and helpful: "This handles the tricky part where..."
- Explain the "why", not just the "what"
- Use contractions: "can't", "won't", "let's"

## Error Messages
- Be helpful and actionable
- Include suggestions when possible
- **No emojis in debug output** - use structured prefixes instead
- Examples:
  - "Connection failed - check your API key"
  - "Invalid symbol format - use BTC-USD instead of BTCUSD"
  - "Rate limit hit - retrying in 60 seconds"

## Debug Output Style
- **Use structured prefixes instead of emojis**:
  - `[ERROR]` for error messages
  - `[WARN]` for warnings  
  - `[INFO]` for information
  - `[DEBUG]` for debug output
  - `[SUCCESS]` for successful operations
  - `[CONN]` for connection events
  - `[SEND]` for outgoing data
  - `[RECV]` for incoming data

### ✅ Good Debug Output
```cpp
log("[ERROR] Failed to authenticate with Coinbase API");
log("[WARN] Connection unstable, retrying...");
log("[INFO] Subscribed to BTC-USD market data");
log("[SUCCESS] All tests passed");
```

### ❌ Bad Debug Output  
```cpp
log("❌ Failed to authenticate with Coinbase API");
log("⚠️ Connection unstable, retrying...");
log("ℹ️ Subscribed to BTC-USD market data");
log("✅ All tests passed");
```

## Task Completion Workflow

**After completing any task, always check and update:**

1. **dev-info/ directory files**:
   - Update documentation for any changed functionality
   - Add new implementation details
   - Document any architectural decisions made

2. **README.md**:
   - Update feature list if new functionality was added
   - Modify installation/build instructions if needed
   - Update examples if API changed
   - Add notes about new dependencies or requirements

3. **Verification checklist**:
   - Does the README accurately reflect current capabilities?
   - Are build instructions still correct?
   - Do examples still work with current code?
   - Is the feature list up to date?